<!doctype html>
<html lang="en">
  <head>
       <style>
      	 .map {
        height: 800px;
        width: 1000px;
      }
	#svg {
		position:absolute;
		top:7px;
		    left: 5px;
        pointer-events:none;
	}
	#symbols {
		display : none;
					}
		     	

    </style>
<script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>

<title>OpenLayers example</title>
  </head>

<body>
    <div id="map" class="map">
		
	</div>
	
	<div id="ToolsPanel"></div>
	

	<svg id="symbols">
	<symbol id="sign1" stroke="red">
			
			<line x1="50" y1="75" x2="0" y2="50"  stroke-width="3"></line>
			<line x1="0" y1="140" x2="0" y2="50" stroke-width="7"></line>
			<line x1="0" y1="100" x2="50" y2="75" stroke-width="3"></line>
			
	</symbol>
	
	<symbol id="sign2" stroke="green">
			
			<line x1="50" y1="50" x2="0" y2="75" stroke-width="3"></line>
		<line x1="50" y1="140" x2="50" y2="50" stroke-width="3"></line>
			<line x1="0" y1="75" x2="50" y2="100" stroke-width="3"></line>
			
	</symbol>
		</svg>
	<button id = "button1" onclick="sign1Add()">Sign1</button>
	<button id = "button1" onclick="sign2Add()">Sign2</button>
	</body>


<script>

function sign1Add(){

var t = new PointSign("sign1", "red")
Conteiner.setPointSign(t);
}

function sign2Add(){


Conteiner.setPointSign(new PointSign("sign2", "green"));
}






	var lastFocus = null;

      var map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          })
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([37.41, 8.82]),
          zoom: 4
        })
      });
	var oldEvt=map.focus_;








function svgConteiner(width, height){


this.cxt = this;
this.width = width;
this.height = height;

var svgCont = document.createElementNS('http://www.w3.org/2000/svg','svg');
svgCont.setAttribute("width", width+"%");
svgCont.setAttribute("height", height+"px");
svgCont.setAttribute("id","svg");
document.body.appendChild(svgCont);




	this.setPointSign = function(sign)
	{
		
		var svgNS = svgCont.namespaceURI;
		console.log(sign);
		signVisual = document.createElementNS('http://www.w3.org/2000/svg','use');
		signVisual.setAttribute('href', '#'+ sign.classCode);
		signVisual.setAttribute('x', 1000); //ашкн rnd
		signVisual.setAttribute('y',1000); //ашкн rnd2-140
		signVisual.style.pointerEvents = "auto";
		signVisual.style.stroke = "green";
		
		
		svgCont.appendChild(signVisual);
		
		
		document.onmousemove = function (e){
		
		signVisual.setAttribute('x', e.offsetX); //ашкн rnd
		signVisual.setAttribute('y',e.offsetY-140); //ашкн rnd2-140
		document.onclick = function(){ 
		sign.signDom = signVisual;
		console.log(signVisual);
	
		signVisual.addEventListener('mousedown', function(){	PPPP= sign;});
		document.onmousemove = null; document.onmousemove = null; document.onclick = null;}	

		}
		
			return signVisual;
			}


}


function PointSign(classCode, color){
	
	this.classCode = classCode;
	this.signDom = null;
	this.color = color;
		

	this.createVisualSign= function(){  // ???????? ??????????? ??????????? ? DOM
		heading = document.createElement("h1");
		heading_text = document.createTextNode("Big Head!");
		heading.appendChild(heading_text);
		document.body.appendChild(heading);
		this.signDom = heading;
							         }
	
	this.getDom = function() {		//????????? ??????? ? DOM
		return this.signDom;
							 }
	
	changeColor = function(color){
		this.color = color ;
								 }
									}

var Conteiner = new svgConteiner(100,800);


</script>

